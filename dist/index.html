<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-16">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Charts for children</title>
    <style>* {
  margin: 0;
  padding: 0;
  font-family: sans-serif;
}

.chartMenu {
  width: 100vw;
  height: 40px;
  color: #36a2eb;
  background: #1a1a1a;
}

.chartMenu p {
  padding: 10px;
  font-size: 20px;
}

.chartCard {
  width: 100vw;
  height: calc(100vh - 40px);
  background: #36a2eb33;
  justify-content: center;
  align-items: center;
  display: flex;
}

.chartBox {
  width: 700px;
  background: #fff;
  border: 3px solid #36a2eb;
  border-radius: 20px;
  padding: 20px;
}

</style>
  </head>
  <body>
    <div class="chartMenu">
      <p>JS-lib for children data literacy</p>
    </div>

    <!--BarCharts-->
    <div class="chartCard">
      <div class="chartBox">
        <canvas id="barTransition"></canvas>
      </div>
    </div>

    <div class="chartCard">
      <div class="chartBox">
        <canvas id="barChart"></canvas>
      </div>
    </div>

    <!--PieCharts-->
    <div class="chartCard">
        <canvas id="pieChart"></canvas>
    </div>

    <!--LineCharts-->
    <div class="chartCard">
      <div class="chartBox">
        <canvas id="lineChart"></canvas>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>let barTransition = "barTransition";
let barChart = "barChart";
let pieChart = "pieChart";
let lineChart = "lineChart";
let Bar = {
    "type": "bar",
    "labels": [
        "Apples",
        "Oranges",
        "Bananas",
        "Strawberrys"
    ],
    "values": [
        1,
        2,
        3,
        4
    ],
    "unicode": [
        "\uD83C\uDF4F",
        "\uD83C\uDF4A",
        "\uD83C\uDF4C",
        "\uD83C\uDF53"
    ]
};
let Pie = {
    "type": "pie",
    "labels": [
        "Apples",
        "Oranges",
        "Bananas",
        "Strawberrys"
    ],
    "values": [
        1,
        2,
        3,
        4
    ],
    "unicode": [
        "\uD83C\uDF4F",
        "\uD83C\uDF4A",
        "\uD83C\uDF4C",
        "\uD83C\uDF53"
    ]
};
let lineGraphValues = {
    "pickedApples": [
        1,
        2,
        3,
        4
    ],
    "pickedOranges": [
        4,
        9,
        2,
        7
    ],
    "pickedBananas": [
        14,
        2,
        2,
        5
    ],
    "pickedStrawberrys": [
        8,
        3,
        6,
        6
    ]
};
let Line = {
    "type": "line",
    "labels": [
        "first day",
        "second day",
        "third day",
        "fourth day"
    ],
    "values": lineGraphValues,
    "labelDataset": [
        "pickedApples",
        "pickedOranges",
        "pickedBananas",
        "pickedStrawberrys"
    ],
    "unicode": [
        "\uD83C\uDF4F",
        "\uD83C\uDF4A",
        "\uD83C\uDF4C",
        "\uD83C\uDF53"
    ]
};
KidChart(barTransition, Bar);
KidChart(barChart, Bar);
KidChart(pieChart, Pie);
KidChart(lineChart, Line);
// setup
function KidChart(typeOfChart, userData) {
    var data = {
        labels: userData.labels,
        datasets: [
            {
                label: "Type of fruit",
                data: userData.values,
                backgroundColor: [
                    "rgba(93, 230, 0, 0.8)",
                    "rgba(233, 148, 0, 0.8)",
                    "rgba(255, 252, 0, 0.8)",
                    "rgba(255, 5, 5, 0.8)"
                ],
                borderColor: [
                    "rgba(93, 230, 0, 1)",
                    "rgba(233, 148, 0, 1)",
                    "rgba(255, 252, 0, 1)",
                    "rgba(255, 5, 5, 1)"
                ],
                borderWidth: 1
            }
        ]
    };
    if (typeOfChart == "lineChart") {
        console.log("if");
        data = {
            labels: userData.labels,
            datasets: [
                {
                    label: userData.labelDataset[0],
                    data: userData.values.pickedApples,
                    fill: false,
                    backgroundColor: "rgba(93, 230, 0, 0.8)",
                    borderColor: "rgba(93, 230, 0, 0.8)"
                },
                {
                    label: userData.labelDataset[1],
                    data: userData.values.pickedOranges,
                    fill: false,
                    backgroundColor: "rgba(233, 148, 0, 0.8)",
                    borderColor: "rgba(233, 148, 0, 0.8)"
                },
                {
                    label: userData.labelDataset[2],
                    data: userData.values.pickedBananas,
                    fill: false,
                    backgroundColor: "rgba(255, 252, 0, 0.8)",
                    borderColor: "rgba(255, 252, 0, 0.8)"
                },
                {
                    label: userData.labelDataset[3],
                    data: userData.values.pickedStrawberrys,
                    fill: false,
                    backgroundColor: "rgba(255, 5, 5, 0.8)",
                    borderColor: "rgba(255, 5, 5, 0.8)"
                }
            ]
        };
    }
    //plugin for pictograms
    const plugin = {
        id: "plugin",
        afterDatasetDraw (chart, args, options) {
            const { ctx , chartArea: { top , bottom , left , right , width , height  } , scales: { x , y  }  } = chart;
            ctx.save();
            if (typeOfChart == "barTransition") {
                for(let i = 0; i < userData.values.length; i++)for(let j = 0; j < userData.values[i]; j++)ctx.fillText(userData.unicode[i], x.getPixelForValue(i) - 12, y.getPixelForValue(j + 1), 30);
            }
        }
    };
    // config
    const config = {
        type: userData.type,
        data,
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        },
        plugins: [
            plugin
        ]
    };
    // render init block
    const myKidChart = new Chart(document.getElementById(typeOfChart), config);
}

</script>
  <script src="/graph-js-lib.59712999.js"></script></body>
</html>
